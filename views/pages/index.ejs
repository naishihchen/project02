<html lang="en">
	<head>
		<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
		<meta content="utf-8" http-equiv="encoding">
		<link rel="stylesheet" type="text/css" href="/stylesheets/styles.css" />
		<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	</head>
	<body>
		<div id="photoDisplay">
			<h1>Photo of The Day</h1>
			<div id="website-buttons">
				<button id="nasa">NASA</button>
				<button id="bing">Bing</button>
			</div>
			<p id="date-format">Search for a photo on a specific day! Please use the format 'yyyy-mm-dd'</p>
			<p id="beginning-date">NASA's Photo Of The Day started on June 16th, 1995, so please pick a date on or afterwards.</p>
			<div id="search-container">
				<form name="search" id="search" action="">
					<label for="searchdate" id="search_label">Search Date: </label>
					<input type="text" name="searchdate" id="searchdate">
					<div id="buttons">
						<button type="submit" id='search'>Get My Photo</button>
					</div>
				</form>
			</div>
			<div id="card-face">
					<img src="../../image-placeholder.png" id="apiPhoto" alt="api photo"> 
			</div>
			<div id="output">
			</div>
		</div>
	</body>
	<script>

		let potdUrl = "/nasaDateSubmit";

		const apiPhoto = document.getElementById('apiPhoto');	

			$("#nasa").click(function() {
				$("#date-format").html("Search for a photo on a specific day! Please use the format 'yyyy-mm-dd'")
				$("#beginning-date").html("NASA's Photo Of The Day started on June 16th, 1995, so please pick a date on or afterwards.")
				potdUrl = "/nasaDateSubmit"
			});

			$("#bing").click(function() {
				$("#date-format").html("Search for a photo on a specific day! Please pick a number from 0 to 600.")
				$("#beginning-date").html("Bing has hundreds of wallpapers to choose from!.")
				potdUrl = "/bingDateSubmit"
			});

			$("#search").submit(function(e) {
				e.preventDefault();

				let searchdate = $('#searchdate').val();

				$.ajax ({
					type: "POST",
					url: potdUrl,
					data: { 'searchdate': searchdate }
				}).done(response => {
					console.log(response);
					apiPhoto.src = response.url;
				});
			});
		</script>
</html>